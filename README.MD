# Flight Booking API

## ğŸš€ Overview

This is a **Flight Booking API** that allows users to search for flights, book them, and retrieve their booking history. It integrates with the **Amadeus API** for real-time flight data and manages user authentication with **JWT** and **MongoDB**.

---

## ğŸ“‚ Project Structure

```
/src
  â”œâ”€â”€ config
  â”‚     â”œâ”€â”€ db.js                  # Database connection
  â”‚     â”œâ”€â”€ amadeus.js             # Fetches Amadeus API token
  â”œâ”€â”€ controllers
  â”‚     â”œâ”€â”€ authController.js       # Handles authentication (register, login)
  â”‚     â”œâ”€â”€ flightBookController.js # Handles flight booking
  â”‚     â”œâ”€â”€ flightSearchController.js # Handles flight search
  â”œâ”€â”€ middleware
  â”‚     â”œâ”€â”€ authMiddleware.js       # JWT authentication middleware
  â”œâ”€â”€ models
  â”‚     â”œâ”€â”€ User.js                 # User model (MongoDB)
  â”‚     â”œâ”€â”€ FlightBooking.js        # Booking model (MongoDB)
  â”œâ”€â”€ routes
  â”‚     â”œâ”€â”€ authRoutes.js           # User authentication routes
  â”‚     â”œâ”€â”€ flightRoutes.js         # Flight search & booking routes
  â”œâ”€â”€ utils
  â”‚     â”œâ”€â”€ generateToken.js        # JWT token generation
  â”œâ”€â”€ server.js                      # Entry point
```

---

## ğŸ”§ Installation & Setup

### 1ï¸âƒ£ **Clone the repository**

```sh
git clone <repo-url>
cd flight-booking-api
```

### 2ï¸âƒ£ **Install dependencies**

```sh
npm install
```

### 3ï¸âƒ£ **Set up environment variables**

Create a `.env` file and add:

```
PORT=5000
MONGO_URI=<your_mongodb_uri>
JWT_SECRET=<your_jwt_secret>
AMADEUS_API_KEY=<your_amadeus_api_key>
AMADEUS_API_SECRET=<your_amadeus_api_secret>
```

### 4ï¸âƒ£ **Start the server**

```sh
npm run dev  # Starts in development mode
```

---

## ğŸ“Œ API Endpoints

### **1ï¸âƒ£ User Authentication**

| Method | Endpoint             | Description                 |
| ------ | -------------------- | --------------------------- |
| `POST` | `/api/auth/register` | Register a new user         |
| `POST` | `/api/auth/login`    | Authenticate user & get JWT |

### **2ï¸âƒ£ Flight Search & Booking**

| Method | Endpoint                      | Description                           |
| ------ | ----------------------------- | ------------------------------------- |
| `GET`  | `/api/flights/search-flights` | Search for flights (Amadeus API)      |
| `POST` | `/api/flights/book-flight`    | Book a flight (Amadeus API + MongoDB) |

**Example Booking Request (Body):**

```json
{
  "userId": "65a3f0e15b123456789abcde",
  "passengers": [
    {
      "firstName": "Michael",
      "lastName": "Smith",
      "dateOfBirth": "1985-10-10",
      "gender": "MALE",
      "emailAddress": "michael.smith@email.com",
      "countryCallingCode": "1",
      "phone": "9876543210"
    }
  ],
  "flightOffers": [ { ... Flight Offer Data from Search API ... } ]
}
```

### **3ï¸âƒ£ Retrieve Past Bookings**

| Method | Endpoint                            | Description                      |
| ------ | ----------------------------------- | -------------------------------- |
| `GET`  | `/api/flights/bookings`             | Get all bookings (Auth required) |
| `GET`  | `/api/flights/bookings?userId=<id>` | Get bookings for a specific user |

---

## âœ… **Testing the API**

Use **Postman** to test API calls:

- Set `Authorization: Bearer <your-jwt-token>` in **Headers**
- Use `Content-Type: application/json`

---

## ğŸš€ Deployment

To deploy, use **Docker**, **Heroku**, or **Vercel**:

```sh
docker build -t flight-booking-api .
docker run -p 5000:5000 flight-booking-api
```

---

## ğŸ›  Tech Stack

- **Node.js** + **Express.js** (Backend API)
- **MongoDB + Mongoose** (Database)
- **JWT** (Authentication)
- **Amadeus API** (Flight Data & Booking)
- **Postman** (Testing API Endpoints)

---

## ğŸ“Œ Next Steps

- âœ… Improve error handling
- âœ… Add pagination for bookings
- âœ… Integrate payment processing (future feature)

---

## ğŸ¤ Contributors

ğŸ‘¤ **Anwesh Mishra**\
ğŸ“§ [anweshmishra2000@gmail.com](mailto:anweshmishra2000@gmail.com)\
ğŸ”— [LinkedIn](https://www.linkedin.com/in/anweshmishra/)\
ğŸ–¥ï¸ [GitHub](https://github.com/i-anniie)

---

## âš¡ Final Notes

> This project provides a robust **Flight Booking API** using Amadeus, ensuring **secure authentication** and **efficient booking management**. Configure your API keys properly before deployment. ğŸš€
